<!DOCTYPE html>

<html lang="en-US"><head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  
  <title>Elastic File System - undefined</title>
  

  <link
    rel="shortcut icon"
    href="https://aws.dendron.so/favicon.ico"
    type="image/x-icon"
  />
  <link
    rel="stylesheet"
    href="https://aws.dendron.so/assets/css/just-the-docs-default.css"
  />
  <script
    type="text/javascript"
    src="https://aws.dendron.so/assets/js/just-the-docs.js"
  ></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
    integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"
    crossorigin="anonymous"
  />
  <script
    type="text/javascript"
    src="https://aws.dendron.so/assets/js/vendor/lunr.min.js"
  ></script>
  
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   
  
<meta name="description" content="Personal knowledge space">
<meta name="author" content="">

<link rel="canonical" href="https://aws.dendron.so/notes/elastic-file-system.html">

<meta property="og:type" content="article">
<meta property="og:url" content="https://aws.dendron.so/notes/elastic-file-system.html">
<meta property="og:description" content="Personal knowledge space">
<meta property="og:image" content="https://aws.dendron.soundefined">

<meta name="twitter:card" content="summary">

<meta name="twitter:url" content="https://aws.dendron.so/notes/elastic-file-system.html">
<meta name="twitter:description" content="Personal knowledge space">
<meta name="twitter:image" content="https://aws.dendron.soundefined">


  <meta property="og:title" content="Elastic File System - undefined" />
  <meta name="twitter:title" content="Elastic File System - undefined" />
  
</head>


<body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
          <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
      </symbol>
      <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
          <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      </symbol>
      <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
          <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </symbol>
      <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </symbol>
      <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
          <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
        </svg>
      </symbol>
    </svg>

    <div class="side-bar">
      <div class="site-header">
        <a href="https://aws.dendron.so" class="site-title lh-tight">
  

 </a>
        <a href="#" id="menu-button" class="site-button">
          <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
        </a>
      </div>

      <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      </nav>
      <footer class="site-footer">
        🌱 with 💕 using <a href="https://www.dendron.so/"> Dendron 🌲 </a>
      </footer>
    </div>
    <div class="main" id="top">
        <div id="main-header" class="main-header">
          
            <div class="search">
              <div class="search-input-wrap">
                <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search " aria-label="Search " autocomplete="off">
                <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
              </div>
              <div id="search-results" class="search-results"></div>
            </div>
          
          
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        
          <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="https://aws.dendron.so">Home</a></li><li class="breadcrumb-nav-list-item"><a href="https://aws.dendron.so/notes/1f759d8c-cca7-4fc4-9aa2-6dbf6e596abf.html">Services</a></li><li class="breadcrumb-nav-list-item">Elastic File System</li></ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">

        
        

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

        

        <script>
          $(function () {
            $('[data-toggle="popover"]').popover({html: true})
          })
        </script>

        

<div id="main" role="main">

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Elastic File System">
    
    <meta itemprop="datePublished" content="1969-12-31T16:00:00+00:00">
    <meta itemprop="dateModified" content="1969-12-31T16:00:00+00:00">

    <div class="page__inner-wrap">

      

      <section class="page__content" itemprop="text">

        

        <p><img src="/assets/images/Amazon-EFS_en.jpg"></p>
<blockquote>
<p>Image from <a href="https://www.awsgeek.com/Amazon-EFS/">@awsgeek</a></p>
</blockquote>
<h1 id="elastic-file-system"><a aria-hidden="true" class="anchor-heading" href="#elastic-file-system"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Elastic File System</h1>
<h3 id="efs-basics"><a aria-hidden="true" class="anchor-heading" href="#efs-basics"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>EFS Basics</h3>
<ul>
<li>📒 <a href="https://aws.amazon.com/efs/">Homepage</a> ∙ <a href="http://docs.aws.amazon.com/efs/latest/ug">User guide</a> ∙ <a href="https://aws.amazon.com/efs/faq/">FAQ</a> ∙ <a href="https://aws.amazon.com/efs/pricing/">Pricing</a></li>
<li>🐥<strong>EFS</strong> is Amazon’s network filesystem. It’s presented as an <a href="https://en.wikipedia.org/wiki/Network_File_System#NFSv4">NFSv4.1</a> server. Any compatible NFSv4 client can mount it.</li>
<li>It is designed to be highly available and durable and each EFS file system object is redundantly stored across multiple availability zones.</li>
<li>EFS is designed to be used as a shared network drive and it can automatically scale up to petabytes of stored data and thousands of instances attached to it.</li>
<li>EFS can offer <a href="http://docs.aws.amazon.com/efs/latest/ug/performance.html">higher throughput</a> (multiple gigabytes per second) and better durability and availability than EBS (see <a href="#storage-durability-availability-and-price">the comparison table</a>), but with higher latency.</li>
<li>EFS is priced based on the volume of data stored, and costs <a href="#storage-durability-availability-and-price">much more than EBS</a>; it's in the ballpark of three times as much compared to general purpose gp2 EBS volumes.</li>
<li>⏱ <a href="http://docs.aws.amazon.com/efs/latest/ug/performance.html">Performance</a> is dependent on the volume of data stored, as is the price:
<ul>
<li>Like EBS, EFS uses a credit based system. Credits are earned at a rate of 50 KiB/s per GiB of storage and consumed in bursts during reading/writing files or metadata. Unlike EBS, operations on metadata (file size, owner, date, etc.) also consume credits. The <a href="http://docs.aws.amazon.com/efs/latest/ug/monitoring-cloudwatch.html#efs-metrics">BurstCreditBalance metric</a> in CloudWatch should be monitored to make sure the file system doesn't run out of credits.</li>
<li>Throughput capacity during bursts is also dependent on size. Under 1 TiB, throughput can go up to 100 MiB/s. Above that, 100 MiB/s is added for each stored TiB. For instance, a file system storing 5 TiB would be able to burst at a rate of 500 MiB/s. Maximum throughput per EC2 instance is 250 MiB/s.</li>
<li>EFS has two performance modes that can only be set when a file system is created. One is "General Purpose", the other is "Max I/O". Max I/O scales higher, but at the cost of higher latency. When in doubt, use General Purpose, which is also the default. If the <a href="http://docs.aws.amazon.com/efs/latest/ug/monitoring-cloudwatch.html#efs-metrics">PercentIOLimit metric</a> in CloudWatch hovers around 100%, Max I/O is recommended. Changing performance mode means creating a new EFS and migrating data.</li>
</ul>
</li>
<li>High availability is achieved by having <a href="http://docs.aws.amazon.com/efs/latest/ug/images/overview-flow.png">mount targets in different subnets / availability zones</a>.</li>
</ul>
<h3 id="efs-tips"><a aria-hidden="true" class="anchor-heading" href="#efs-tips"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>EFS Tips</h3>
<ul>
<li>
<p>With EFS being based on NFSv4.1, any directory on the EFS can be mounted directly, it doesn't have to be the root directory. One application could mount <em>fs-12345678:/prog1</em>, another <em>fs-12345678:/prog2</em>.</p>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/efs/latest/ug/accessing-fs-nfs-permissions.html">User and group level permissions</a> can be used to control access to certain directories on the EFS file system.</p>
</li>
<li>
<p>⏱ <strong>Sharing EFS filesystems:</strong> One EFS filesystem can be used for multiple applications or services, but it should be considered carefully:</p>
<p>Pros:</p>
<ul>
<li>Because performance is based on total size of stored files, having everything on one drive will increase performance for everyone. One application consuming credits faster than it can accumulate might be offset by another application that just stores files on EFS and rarely accesses them.</li>
</ul>
<p>Cons:</p>
<ul>
<li>Since credits are shared, if one application over-consumes them, it will affect the others.</li>
<li>A compromise is made with regards to <a href="http://docs.aws.amazon.com/efs/latest/ug/security-considerations.html">security</a>: all clients will have to have network access to the drive. Someone with root access on one client instance can mount any directory on the EFS and they have read-write access to all files on the drive, even if they don't have access to the applications hosted on other clients. There isn't a no-root-squash equivalent for EFS.</li>
</ul>
</li>
</ul>
<h3 id="efs-gotchas-and-limitations"><a aria-hidden="true" class="anchor-heading" href="#efs-gotchas-and-limitations"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>EFS Gotchas and Limitations</h3>
<ul>
<li>🔸 A number of NFSv4.1 features are <a href="http://docs.aws.amazon.com/efs/latest/ug/nfs4-unsupported-features.html">not supported</a> and there are some <a href="http://docs.aws.amazon.com/efs/latest/ug/limits.html">limits</a> to the service.</li>
<li>🔸 As of 2017-08, EFS offers disk level encryption for new drives. For file systems created before that date, encryption can only be achieved by moving the data to a new EFS volume.</li>
<li>🔸 An EFS file system <a href="https://aws.amazon.com/efs/faq/#on-premises">can be mounted on premises</a> over Direct Connect.</li>
<li>🔸 An EFS file system can NOT be mounted over VPC peering or VPN, even if the VPN is running on top of Direct Connect.</li>
<li>🔸 Using an EFS volume on Windows is not supported.</li>
<li>⏱ When a file is uploaded to EFS, it can take hours for EFS to update the details for billing and burst credit purposes.</li>
<li>🔸⏱  Metadata operations can be costly in terms of burst credit consumption. Recursively traversing a tree containing thousands of files can easily ramp up to tens or even hundreds of megabytes of burst credits being consumed, even if no file is being touched. Commands like <code>find</code> or <code>chown -R</code> can have an adverse impact on performance.</li>
</ul><span id="navId" data="elastic-file-system"></span>

                
      </section>

      
    </div>

    
  </article>

  
  
</div>


        
          <hr>
          <footer>
            
            

            
                
              </div>
          </footer>
        
    </div>
</div>


  

  <div class="search-overlay"></div>

</div>
</body>
</html>
