<!DOCTYPE html>

<html lang="en-US"><head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  
  <title>API Gateway - undefined</title>
  

  <link
    rel="shortcut icon"
    href="https://aws.dendron.so/favicon.ico"
    type="image/x-icon"
  />
  <link
    rel="stylesheet"
    href="https://aws.dendron.so/assets/css/just-the-docs-default.css"
  />
  <script
    type="text/javascript"
    src="https://aws.dendron.so/assets/js/just-the-docs.js"
  ></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
    integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"
    crossorigin="anonymous"
  />
  <script
    type="text/javascript"
    src="https://aws.dendron.so/assets/js/vendor/lunr.min.js"
  ></script>
  
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   
  
<meta name="description" content="Personal knowledge space">
<meta name="author" content="">

<link rel="canonical" href="https://aws.dendron.so/notes/api-gateway.html">

<meta property="og:type" content="article">
<meta property="og:url" content="https://aws.dendron.so/notes/api-gateway.html">
<meta property="og:description" content="Personal knowledge space">
<meta property="og:image" content="https://aws.dendron.soundefined">

<meta name="twitter:card" content="summary">

<meta name="twitter:url" content="https://aws.dendron.so/notes/api-gateway.html">
<meta name="twitter:description" content="Personal knowledge space">
<meta name="twitter:image" content="https://aws.dendron.soundefined">


  <meta property="og:title" content="API Gateway - undefined" />
  <meta name="twitter:title" content="API Gateway - undefined" />
  
</head>


<body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
          <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
      </symbol>
      <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
          <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      </symbol>
      <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
          <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </symbol>
      <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </symbol>
      <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
          <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
        </svg>
      </symbol>
    </svg>

    <div class="side-bar">
      <div class="site-header">
        <a href="https://aws.dendron.so" class="site-title lh-tight">
  

 </a>
        <a href="#" id="menu-button" class="site-button">
          <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
        </a>
      </div>

      <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      </nav>
      <footer class="site-footer">
        🌱 with 💕 using <a href="https://www.dendron.so/"> Dendron 🌲 </a>
      </footer>
    </div>
    <div class="main" id="top">
        <div id="main-header" class="main-header">
          
            <div class="search">
              <div class="search-input-wrap">
                <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search " aria-label="Search " autocomplete="off">
                <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
              </div>
              <div id="search-results" class="search-results"></div>
            </div>
          
          
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        
          <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="https://aws.dendron.so">Home</a></li><li class="breadcrumb-nav-list-item"><a href="https://aws.dendron.so/notes/1f759d8c-cca7-4fc4-9aa2-6dbf6e596abf.html">Services</a></li><li class="breadcrumb-nav-list-item">API Gateway</li></ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">

        
        

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

        

        <script>
          $(function () {
            $('[data-toggle="popover"]').popover({html: true})
          })
        </script>

        

<div id="main" role="main">

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="API Gateway">
    
    <meta itemprop="datePublished" content="1969-12-31T16:00:00+00:00">
    <meta itemprop="dateModified" content="1969-12-31T16:00:00+00:00">

    <div class="page__inner-wrap">

      

      <section class="page__content" itemprop="text">

        

        <p><img src="/assets/images/Amazon-API-Gateway_en.jpg"></p>
<blockquote>
<p>Image from <a href="https://www.awsgeek.com/Amazon-API-Gateway/">@awsgeek</a></p>
</blockquote>
<h1 id="api-gateway"><a aria-hidden="true" class="anchor-heading" href="#api-gateway"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>API Gateway</h1>
<h3 id="api-gateway-basics"><a aria-hidden="true" class="anchor-heading" href="#api-gateway-basics"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>API Gateway Basics</h3>
<ul>
<li>📒 <a href="https://aws.amazon.com/api-gateway/">Homepage</a> ∙ <a href="http://docs.aws.amazon.com/apigateway/latest/developerguide/">Developer guide</a> ∙ <a href="https://aws.amazon.com/api-gateway/faqs/">FAQ</a> ∙ <a href="https://aws.amazon.com/api-gateway/pricing/">Pricing</a></li>
<li><strong>API Gateway</strong> provides a scalable, secured front-end for service APIs, and can work with Lambda, Elastic Beanstalk, or regular EC2 services.</li>
<li>It allows “serverless” deployment of applications built with Lambda.</li>
<li>🔸Switching over deployments after upgrades can be tricky. There are no built-in mechanisms to have a single domain name migrate from one API gateway to another one. So it may be necessary to build an additional layer in front (even another API Gateway) to allow smooth migration from one deployment to another.</li>
</ul>
<h3 id="api-gateway-alternatives-and-lock-in"><a aria-hidden="true" class="anchor-heading" href="#api-gateway-alternatives-and-lock-in"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>API Gateway Alternatives and Lock-In</h3>
<ul>
<li><a href="https://getkong.org">Kong</a> is an open-source, on-premises API and microservices gateway built on nginx with Lua. Kong is extensible through “plugins”.</li>
<li><a href="https://tyk.io">Tyk</a> is an open-source API gateway implemented in Go and available in the cloud, on-premises or hybrid.</li>
</ul>
<h3 id="api-gateway-tips"><a aria-hidden="true" class="anchor-heading" href="#api-gateway-tips"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>API Gateway Tips</h3>
<ul>
<li>🔹Prior to 2016-11, you could only send and receive plain text data (so people would base64-encode binary data), but binary data is <a href="https://aws.amazon.com/about-aws/whats-new/2016/11/binary-data-now-supported-by-api-gateway/">now</a> supported.</li>
<li>API Gateway supports the OpenApi specification (aka <a href="https://swagger.io/">Swagger</a>). This allows you to describe your API in a language-agnostic way and use various tools to generate code supporting your API.</li>
<li>Generating clients is extremely easy, either through the AWS console or using the get-sdk API.</li>
<li>API Gateway integrates with CloudWatch out-of-the-box, allowing for easy logging of requests and responses.
<ul>
<li>Note that if your request or response are too large, CloudWatch will truncate the log. For full request/reply logging, make sure to do so in your integration (e.g. Lambda).</li>
<li>A good practice when calling API Gateway APIs is to log the request ID on the client. You can later refer to these request IDs in CloudWatch for easier tracing and debugging.</li>
</ul>
</li>
<li>There are multiple ways to secure your API, including built-in support for <a href="http://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-integrate-with-cognito.html">AWS Cognito</a>. For most use-cases, Cognito is the easiest and simplest way to authenticate users.
<ul>
<li>Although you can roll your own solution using a <a href="http://docs.aws.amazon.com/apigateway/latest/developerguide/use-custom-authorizer.html">custom authorizer</a>, which is basically a Lambda you define that determines if a request is acceptable or not.</li>
</ul>
</li>
<li>While API Gateway lends itself well to REST-style development, it's perfectly reasonable to implement an RPC-style API in API Gateway as well. Depending on your use-case, this can often lead to a much simpler API structure and smoother client experience.
<ul>
<li>RPC-style APIs are particularly useful when designing services that sit deeper in the stack and don't serve content directly to users.</li>
</ul>
</li>
</ul>
<h3 id="api-gateway-gotchas-and-limitations"><a aria-hidden="true" class="anchor-heading" href="#api-gateway-gotchas-and-limitations"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>API Gateway Gotchas and Limitations</h3>
<ul>
<li>🔸API Gateway only supports encrypted (https) endpoints, and does not support unencrypted HTTP. (This is probably a good thing.)</li>
<li>🔸API Gateway doesn’t support multi-region deployments for high availability. It is a service that is deployed in a single region but comes with a global endpoint that is served from AWS edge locations (similar to a CloudFront distribution). You cannot have multiple API Gateways with the same hostname in different AWS regions and use Route 53 to distribute the traffic. More in <a href="https://forums.aws.amazon.com/thread.jspa?messageID=735342&#x26;#735342">this forum post</a>.</li>
<li>🔸Integration timeout: All of the various integration types (eg: Lambda, HTTP) for API Gateway have timeouts, as described <a href="http://docs.aws.amazon.com/apigateway/latest/developerguide/limits.html#api-gateway-limits">here</a>. Unlike some limits, these timeouts can't be increased.</li>
<li>🔸API Gateway returns a 504 status code for any network or low level transport related issue. When this happens, you may see a message in the CloudWatch logs for the request that includes the message: <code>Execution failed due to an internal error</code>. One possible reason for this error is that even though your backend server is up and running, it may be doing something outside of the HTTP specification (like not sending well-formed chunked messages). You can test by hitting your backend directly with the <code>curl --raw -S -i &#x3C;backend-endpoint-url></code> and seeing if it complains.</li>
<li>🔸AWS X-Ray support exists but cumbersome to use. If you have other AWS services calling API Gateway, your trace will seemingly end there. API Gateway will also not appear as a node in your service map. <a href="http://docs.aws.amazon.com/xray/latest/devguide/xray-services-apigateway.html">More here</a>.</li>
<li>🔸Be careful using the export feature. The resulting Swagger template is often incomplete and doesn't integrate well with the Swagger extensions for things such as CORS.</li>
<li>🔸Many changes to API Gateway resources need to be 'deployed' via console or API call. Unfortunately, API Gateway is terrible about notifying the user when changes are staged for deployment and what changes require deployment. If you've changed something about your API and it's not taking effect, there's a decent chance you just need to deploy it.
<ul>
<li>In particular, when deploying an API Gateway as part of a CloudFormation stack, changes will not automatically deploy unless the deployment resource itself was changed. You can change work around this by always changing the deployment resource on a CloudFormation update, or running a custom resource that ensures the deployment is made.</li>
<li>Alternatively, by using the <a href="https://github.com/awslabs/serverless-application-model">Serverless Application Model</a> definition for an API Gateway resource, you can always expect the API to be deployed on a stack update since SAM will generate a new deployment every time.</li>
</ul>
</li>
<li>🔸API Gateway does not support nested query parameters on method requests.</li>
<li>🔸API Gateway limits number of resources to 300, as described <a href="http://docs.aws.amazon.com/apigateway/latest/developerguide/limits.html#api-gateway-limits">here</a>. This is something to be considered when you start using API Gateway as a platform where your team/organization deploys to the same API Gateway.</li>
</ul>
<p>🚧 <a href="CONTRIBUTING.md"><em>Please help expand this incomplete section.</em></a></p><span id="navId" data="api-gateway"></span>

                
      </section>

      
    </div>

    
  </article>

  
  
</div>


        
          <hr>
          <footer>
            
            

            
                
              </div>
          </footer>
        
    </div>
</div>


  

  <div class="search-overlay"></div>

</div>
</body>
</html>
